<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Document</title>
		<link rel="stylesheet" type="text/css" href="../css/list.css" />
	</head>
	<body>
		<!-- banner_top -->
		<div class="banner_top">
			<img src="../img/banner_top.jpg">
		</div>
		<!-- 顶部 -->
		<div class="header">
			<div class="board">
				<div class="header_left">
					<ul>
						<li>考拉欢迎你</li>
						<li><a class="color_999" href="../page/login.html">登录</a></li>
						<li><a class="color_999" href="../page/reg.html">免费注册</a></li>
						<li>手机考拉</li>
					</ul>
				</div>
				<div class="header_right">
					<ul>
						<li>每日签到</li>
						<li>我的订单</li>
						<li>个人中心</li>
						<li>客服服务</li>
						<li>充值中心</li>
						<li>消费者权益</li>
						<li>更多</li>
						<li>视频内容</li>
					</ul>
				</div>
			</div>
		</div>
		<!-- logo -->
		<div class="top">
			<div class="board">
				<div class="logo">
					<a href="../index.html"><img src="../img/logo.png" /></a>
				</div>
				<div id="topsearch">
					<div class="wrap">
						<input id="topSearchInput" type="text" placeholder="">
					</div>
					<div class="topsearchboxBackGround">
						<div id="topSearchBtn"></div>
					</div>
				</div>
				<div class="history">
					<ul>
						<li>口红</li>
						<li>女装</li>
						<li>男装</li>
					</ul>
				</div>
				<div name="buycar" class="car">
					<div class="car_logo">
						<img src="../img/购物车.png">
					</div>
					<div class="car_text">购物车</div>
				</div>
			</div>
		</div>
		<!-- nav -->
		<div class="top_nav">
			<div class="board">
				<div class="navitm">
					<div class="nav_img">
						<img src="../img/mulu.png">
					</div>
					<div class="nav_text">所有分类</div>
				</div>
				<ul class="nav_tab">
					<li><a class="color_000" href="./list.html?cat_one_id=手机相机" role="button">手机相机</a></li>
					<li><a class="color_000" href="./list.html?cat_one_id=海外购" role="button">海外直邮</a></li>
					<li><a class="color_000" href="./list.html?cat_one_id=童装玩具" role="button">童装玩具</a></li>
					<li><a class="color_000" href="./list.html?cat_one_id=奶粉尿裤" role="button">品质奶粉</a></li>
					<li><a class="color_000" href="./list.html?cat_one_id=智能设备" role="button">智能设备</a></li>
					<li><a class="color_000" href="./list.html?cat_one_id=家装建材" role="button">家装建材</a></li>
				</ul>
			</div>
		</div>
		<div class="banner">
			<img src="../img/b1.jpg">
		</div>
		<div class="container">
			<div class="board">
				<ul class="cp_ul"></ul>
			</div>
		</div>
		<div class="container">
			<div class="board">
				<ul class="cp_ul"></ul>
			</div>
		</div>
		<div class="container">
			<div class="board">
				<ul class="cp_ul"></ul>
			</div>
		</div>
			<div class="fenye"></div>

		
		<!-- footer -->
		<div class="footer">
			<a href="https://you.kaola.com/common/page.html?key=Privacy_policy" rel="nofollow" class="color_999" target="_blank" title="隐私政策">隐私政策</a>
			<span class="sep">- </span>
			<a href="https://www.kaola.com/" target="_blank" class="color_999" title="考拉海购" data-param="zn=footer">考拉海购</a><br>
			<span class="m-license">增值电信业务经营许可证：浙B2-20160288</span>
			<span class="m-license">
				<a href="//pages.kaola.com/pages/activity/Businessentity.shtml" rel="nofollow" class="color_999" target="_blank" title="自营经营者信息">自营经营者信息 </a>
			</span>
			<span class="m-license">（浙）网械平台备字[2018]第00007号</span><br>
			<a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33010802002216&no_protofix" class="color_999">
				<img src="//haitao.nos.netease.com/f28aa8ee818a42bf832341f605eccefb.png">
			</a>
			<a target="_blank" class="color_999" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33010802002216&no_protofix">
				<span style="margin: 0px 0px 0px 5px;">浙公网安备 33010802002216号</span>
			</a>
			<span class="m-license">阿里巴巴版权所有©2003-2020</span>
			<a target="_blank" class="color_999" href="//haitao.nos.netease.com/d37ac4eb-016f-485b-9577-04ae7e0f4bbd.jpg">
				<span style="margin: 0px 0px 0px 20px;">互联网药品信息服务资格证书编号（浙）-2017-0027</span>
			</a>
			<a target="_blank" href="http://beian.miit.gov.cn" class="color_999">
				<span style="margin: 0px 0px 0px 20px;">浙ICP备16011229号</span>
			</a>
			<div class="f-tac">
				<span class="KXYZ">
					<img src="//haitao.nos.netease.com/d720d83b55a04b6f932ea845c673c5bf.png" alt="可信网站">
				</span>
				<span class="KXYZ1">
					<img src="//img.alicdn.com/tfs/TB1rcIoq.Y1gK0jSZFCXXcwqXXa-65-70.png" alt="工商营业执照网上标识">
				</span>
			</div>
		</div>
<script src="../js/jquery-1.8.3.min.js"></script>
<script src="../js/jquery.pagination.js"></script>
<script>
    let arr = (decodeURI(window.location.search).substring(1)).split('=');
    getAjax(arr[1]); 
	console.log(arr);
	function getAjax(key , page=1 ,line=12) {
      $.ajax({
        url: '../server/goods_select.php',
        data: {
          cat_one_id: key,
          page: page,
          line: line,
        },
        // 传参类型是get类型
        type: 'get',
        // 返回值的类型是 json
        dataType: 'json',
        // 请求成功之后,执行的函数
        success(res) {
          // 需要根据响应体内容,生成页面
          // 生成li,写入到ul中
          console.log(res);
          // 存储生成li标签的变量
          let str = '';
          res.forEach(function(item){
            str += `
            <li class="chanpin">
				<div class="board">
					<div> <img src="${item.goods_big_logo}" alt="..."> </div>
					<h4 class="cp_name">${item.goods_name}</h4>
					<p class="cp_price">￥${item.goods_price}</p>
					<p><a href="./detail.html?goods_id=${item.goods_id}" role="button">查看商品详情</a></p>
				</div>
            </li>
          `;
          })
          $('.cp_ul').html(str);
          $('.fenye').pagination({
            pageCount: res[0]['sumPage'],  // 总页数
            totalData: res[0]['row'],      // 总数据
            current:  res[0]['page'],      // 当前页
            showData:  8,   
            count:  2,      
            coping:true ,  
            homePage: '首页',    
            endPage:  '末页' ,   
            prevContent:  '上一页',
            nextContent:  '下一页',

            callback : function(result){
              
              getAjax(arr[1] , result.getCurrent() ); 
            }

        });

        }
      })

    }

    // 分页显示需要设定的参数数据
    // 是分页显示插件需要的参数
    // pageCount:    总页数
    // totalData:    数据的总数据
    // current:      当前页数
    // showData:     每页的数据数量
    // count:        选中页数的前后页数的总页码
    // coping:true   是否开启首页和末页
    // homePage:     首页的内容
    // endPage:      末页的内容
    // prevContent:  上一页的内容
    // nextContent:  下一页的内容
    // callback : 回调函数
    //其中可以定义方法  结果.getCurrent()
    //获取当前点击的分页标签,所表示的页数
	
  </script>
	</body>
</html>
